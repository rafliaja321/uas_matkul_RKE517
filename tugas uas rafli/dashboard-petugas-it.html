<!doctype html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard Petugas IT - Sistem Informasi Rumah Sakit</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        min-height: 100vh;
      }

      .navbar {
        background: white;
        padding: 1rem 2rem;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .navbar h2 {
        color: #2c3e50;
      }

      .user-info {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .user-info span {
        color: #555;
        font-weight: 500;
      }

      .logout-btn {
        background: #e74c3c;
        color: white;
        border: none;
        padding: 0.5rem 1.5rem;
        border-radius: 5px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: background 0.3s;
      }

      .logout-btn:hover {
        background: #c0392b;
      }

      .container {
        max-width: 1600px;
        margin: 2rem auto;
        padding: 0 2rem;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      .stat-card {
        background: white;
        border-radius: 10px;
        padding: 1.5rem;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .stat-icon {
        font-size: 3rem;
        width: 70px;
        height: 70px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 10px;
      }

      .stat-info h3 {
        font-size: 2rem;
        color: #2c3e50;
        margin-bottom: 0.25rem;
      }

      .stat-info p {
        color: #7f8c8d;
        font-size: 0.9rem;
      }

      .card {
        background: white;
        border-radius: 10px;
        padding: 2rem;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        margin-bottom: 2rem;
      }

      .card h3 {
        color: #2c3e50;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 1.3rem;
      }

      .icon {
        font-size: 1.5rem;
      }

      .filter-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-bottom: 1.5rem;
        padding: 1.5rem;
        background: #f8f9fa;
        border-radius: 10px;
      }

      .filter-group label {
        display: block;
        margin-bottom: 0.5rem;
        color: #555;
        font-weight: 500;
        font-size: 0.9rem;
      }

      .filter-group input,
      .filter-group select {
        width: 100%;
        padding: 0.6rem;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 0.9rem;
      }

      .btn {
        background: #3498db;
        color: white;
        border: none;
        padding: 0.6rem 1.5rem;
        border-radius: 5px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: background 0.3s;
      }

      .btn:hover {
        background: #2980b9;
      }

      .btn-success {
        background: #27ae60;
      }

      .btn-success:hover {
        background: #229954;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 1rem;
      }

      table th {
        background: #34495e;
        color: white;
        padding: 1rem;
        text-align: left;
        font-size: 0.9rem;
      }

      table td {
        padding: 1rem;
        border-bottom: 1px solid #eee;
        font-size: 0.9rem;
      }

      table tr:hover {
        background: #f8f9fa;
      }

      .badge {
        padding: 0.25rem 0.75rem;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 500;
      }

      .badge-login {
        background: #d4edda;
        color: #155724;
      }

      .badge-logout {
        background: #f8d7da;
        color: #721c24;
      }

      .badge-create {
        background: #d1ecf1;
        color: #0c5460;
      }

      .badge-update {
        background: #fff3cd;
        color: #856404;
      }

      .badge-delete {
        background: #f8d7da;
        color: #721c24;
      }

      .badge-view {
        background: #e2e3e5;
        color: #383d41;
      }

      .role-badge {
        padding: 0.25rem 0.75rem;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 500;
      }

      .role-dokter {
        background: #cce5ff;
        color: #004085;
      }

      .role-petugas-rm {
        background: #d4edda;
        color: #155724;
      }

      .role-petugas-it {
        background: #fff3cd;
        color: #856404;
      }

      .role-admin {
        background: #f8d7da;
        color: #721c24;
      }

      .pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 0.5rem;
        margin-top: 1.5rem;
      }

      .pagination button {
        background: #ecf0f1;
        border: 1px solid #bdc3c7;
        color: #2c3e50;
        padding: 0.5rem 1rem;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s;
      }

      .pagination button:hover:not(:disabled) {
        background: #3498db;
        color: white;
      }

      .pagination button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .pagination button.active {
        background: #3498db;
        color: white;
      }

      .export-buttons {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
      }

      .search-box {
        margin-bottom: 1rem;
      }

      .search-box input {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 0.9rem;
      }

      .time-badge {
        font-size: 0.85rem;
        color: #7f8c8d;
      }

      .data-access {
        font-size: 0.85rem;
        color: #555;
        font-style: italic;
      }
    </style>
  </head>
  <body>
    <nav class="navbar">
      <h2>üíª Dashboard Petugas IT - Monitoring Sistem</h2>
      <div class="user-info">
        <span>üë®‚Äçüíª <span id="itName">-</span></span>
        <button class="logout-btn" onclick="logout()">Logout</button>
      </div>
    </nav>

    <div class="container">
      <!-- Statistics Cards -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon" style="background: #e3f2fd">üë•</div>
          <div class="stat-info">
            <h3>156</h3>
            <p>Total Pengguna</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon" style="background: #f3e5f5">üü¢</div>
          <div class="stat-info">
            <h3>42</h3>
            <p>Pengguna Online</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon" style="background: #fff3e0">üìä</div>
          <div class="stat-info">
            <h3>1,248</h3>
            <p>Aktivitas Hari Ini</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon" style="background: #e8f5e9">‚ö†Ô∏è</div>
          <div class="stat-info">
            <h3>3</h3>
            <p>Aktivitas Mencurigakan</p>
          </div>
        </div>
      </div>

      <!-- Activity Log -->
      <div class="card">
        <h3><span class="icon">üìã</span> Log Aktivitas Pengguna</h3>

        <!-- Filter Section -->
        <div class="filter-container">
          <div class="filter-group">
            <label>Tanggal Mulai</label>
            <input type="date" id="filterTanggalMulai" />
          </div>
          <div class="filter-group">
            <label>Tanggal Selesai</label>
            <input type="date" id="filterTanggalSelesai" />
          </div>
          <div class="filter-group">
            <label>Peran</label>
            <select id="filterPeran">
              <option value="">Semua Peran</option>
              <option value="Dokter">Dokter</option>
              <option value="Petugas RM">Petugas RM</option>
              <option value="Petugas IT">Petugas IT</option>
              <option value="Admin">Admin</option>
            </select>
          </div>
          <div class="filter-group">
            <label>Jenis Aktivitas</label>
            <select id="filterAktivitas">
              <option value="">Semua Aktivitas</option>
              <option value="Login">Login</option>
              <option value="Logout">Logout</option>
              <option value="Create">Create</option>
              <option value="Update">Update</option>
              <option value="Delete">Delete</option>
              <option value="View">View</option>
            </select>
          </div>
          <div
            class="filter-group"
            style="display: flex; align-items: flex-end"
          >
            <button class="btn" onclick="applyFilter()">üîç Filter</button>
          </div>
        </div>

        <!-- Search Box -->
        <div class="search-box">
          <input
            type="text"
            id="searchUser"
            placeholder="üîç Cari nama pengguna atau data yang diakses..."
          />
        </div>

        <!-- Activity Table -->
        <div style="overflow-x: auto">
          <table id="activityTable">
            <thead>
              <tr>
                <th>Waktu Aktivitas</th>
                <th>Nama Pengguna</th>
                <th>Peran</th>
                <th>Aktivitas</th>
                <th>Data yang Diakses</th>
                <th>IP Address</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><span class="time-badge">01 Feb 2026, 14:23:15</span></td>
                <td>Dr. Ahmad Susanto</td>
                <td><span class="role-badge role-dokter">Dokter</span></td>
                <td><span class="badge badge-create">Create</span></td>
                <td>
                  <span class="data-access"
                    >Diagnosa Pasien: Siti Nurhaliza (RM-2025-002)</span
                  >
                </td>
                <td>192.168.1.105</td>
              </tr>
              <tr>
                <td><span class="time-badge">01 Feb 2026, 14:18:42</span></td>
                <td>Rina Wijaya</td>
                <td>
                  <span class="role-badge role-petugas-rm">Petugas RM</span>
                </td>
                <td><span class="badge badge-create">Create</span></td>
                <td>
                  <span class="data-access"
                    >Pendaftaran Pasien Baru: Muhammad Farhan
                    (RM-2026-045)</span
                  >
                </td>
                <td>192.168.1.112</td>
              </tr>
              <tr>
                <td><span class="time-badge">01 Feb 2026, 14:15:08</span></td>
                <td>Dr. Sarah Melati</td>
                <td><span class="role-badge role-dokter">Dokter</span></td>
                <td><span class="badge badge-update">Update</span></td>
                <td>
                  <span class="data-access"
                    >Tindakan Medis: Ahmad Rizki (RM-2025-001)</span
                  >
                </td>
                <td>192.168.1.108</td>
              </tr>
              <tr>
                <td><span class="time-badge">01 Feb 2026, 14:10:33</span></td>
                <td>Budi Hartono</td>
                <td>
                  <span class="role-badge role-petugas-it">Petugas IT</span>
                </td>
                <td><span class="badge badge-view">View</span></td>
                <td><span class="data-access">Log Aktivitas Sistem</span></td>
                <td>192.168.1.200</td>
              </tr>
              <tr>
                <td><span class="time-badge">01 Feb 2026, 14:05:19</span></td>
                <td>Dewi Kartika</td>
                <td>
                  <span class="role-badge role-petugas-rm">Petugas RM</span>
                </td>
                <td><span class="badge badge-create">Create</span></td>
                <td>
                  <span class="data-access"
                    >Kunjungan Ulang: Budi Santoso (RM-2025-003)</span
                  >
                </td>
                <td>192.168.1.115</td>
              </tr>
              <tr>
                <td><span class="time-badge">01 Feb 2026, 13:58:47</span></td>
                <td>Dr. Ahmad Susanto</td>
                <td><span class="role-badge role-dokter">Dokter</span></td>
                <td><span class="badge badge-view">View</span></td>
                <td>
                  <span class="data-access"
                    >Riwayat Medis: Ahmad Rizki (RM-2025-001)</span
                  >
                </td>
                <td>192.168.1.105</td>
              </tr>
              <tr>
                <td><span class="time-badge">01 Feb 2026, 13:52:11</span></td>
                <td>Admin System</td>
                <td><span class="role-badge role-admin">Admin</span></td>
                <td><span class="badge badge-update">Update</span></td>
                <td>
                  <span class="data-access"
                    >Konfigurasi Sistem: Backup Database</span
                  >
                </td>
                <td>192.168.1.201</td>
              </tr>
              <tr>
                <td><span class="time-badge">01 Feb 2026, 13:45:29</span></td>
                <td>Dr. Sarah Melati</td>
                <td><span class="role-badge role-dokter">Dokter</span></td>
                <td><span class="badge badge-login">Login</span></td>
                <td><span class="data-access">Login ke Sistem</span></td>
                <td>192.168.1.108</td>
              </tr>
              <tr>
                <td><span class="time-badge">01 Feb 2026, 13:40:56</span></td>
                <td>Rina Wijaya</td>
                <td>
                  <span class="role-badge role-petugas-rm">Petugas RM</span>
                </td>
                <td><span class="badge badge-view">View</span></td>
                <td>
                  <span class="data-access"
                    >Laporan Pasien Baru - Januari 2026</span
                  >
                </td>
                <td>192.168.1.112</td>
              </tr>
              <tr>
                <td><span class="time-badge">01 Feb 2026, 13:35:22</span></td>
                <td>Dr. Ahmad Susanto</td>
                <td><span class="role-badge role-dokter">Dokter</span></td>
                <td><span class="badge badge-create">Create</span></td>
                <td>
                  <span class="data-access"
                    >Resep Obat: Diabetes - Siti Nurhaliza (RM-2025-002)</span
                  >
                </td>
                <td>192.168.1.105</td>
              </tr>
              <tr>
                <td><span class="time-badge">01 Feb 2026, 13:28:14</span></td>
                <td>Dewi Kartika</td>
                <td>
                  <span class="role-badge role-petugas-rm">Petugas RM</span>
                </td>
                <td><span class="badge badge-update">Update</span></td>
                <td>
                  <span class="data-access"
                    >Data Pasien: Update Alamat - Ahmad Rizki</span
                  >
                </td>
                <td>192.168.1.115</td>
              </tr>
              <tr>
                <td><span class="time-badge">01 Feb 2026, 13:20:41</span></td>
                <td>Budi Hartono</td>
                <td>
                  <span class="role-badge role-petugas-it">Petugas IT</span>
                </td>
                <td><span class="badge badge-login">Login</span></td>
                <td><span class="data-access">Login ke Sistem</span></td>
                <td>192.168.1.200</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Pagination -->
        <div class="pagination">
          <button onclick="previousPage()" id="prevBtn">‚Üê Previous</button>
          <button class="active">1</button>
          <button>2</button>
          <button>3</button>
          <button>4</button>
          <button>5</button>
          <button onclick="nextPage()" id="nextBtn">Next ‚Üí</button>
        </div>

        <!-- Export Buttons -->
        <div class="export-buttons">
          <button class="btn btn-success" onclick="exportData('pdf')">
            üìÑ Export PDF
          </button>
          <button class="btn btn-success" onclick="exportData('excel')">
            üìä Export Excel
          </button>
          <button class="btn btn-success" onclick="exportData('csv')">
            üìã Export CSV
          </button>
        </div>
      </div>

      <!-- System Info -->
      <div class="card">
        <h3><span class="icon">‚öôÔ∏è</span> Informasi Sistem</h3>
        <div class="stats-grid" style="margin-top: 1rem">
          <div style="padding: 1rem; background: #f8f9fa; border-radius: 8px">
            <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 0.5rem">
              Versi Sistem
            </p>
            <p style="color: #2c3e50; font-weight: 600">SIMRS v2.5.1</p>
          </div>
          <div style="padding: 1rem; background: #f8f9fa; border-radius: 8px">
            <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 0.5rem">
              Database
            </p>
            <p style="color: #2c3e50; font-weight: 600">MySQL 8.0.32</p>
          </div>
          <div style="padding: 1rem; background: #f8f9fa; border-radius: 8px">
            <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 0.5rem">
              Server Uptime
            </p>
            <p style="color: #2c3e50; font-weight: 600">45 Hari 12 Jam</p>
          </div>
          <div style="padding: 1rem; background: #f8f9fa; border-radius: 8px">
            <p style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 0.5rem">
              Backup Terakhir
            </p>
            <p style="color: #2c3e50; font-weight: 600">01 Feb 2026, 02:00</p>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Set nama IT dari localStorage
      document.addEventListener("DOMContentLoaded", function () {
        const username = localStorage.getItem("username") || "Petugas IT";
        document.getElementById("itName").textContent = username;

        // Set default date filters
        const today = new Date().toISOString().split("T")[0];
        document.getElementById("filterTanggalSelesai").value = today;
      });

      // Search functionality
      document
        .getElementById("searchUser")
        .addEventListener("keyup", function () {
          const searchValue = this.value.toLowerCase();
          const rows = document.querySelectorAll("#activityTable tbody tr");

          rows.forEach((row) => {
            const username = row.cells[1].textContent.toLowerCase();
            const dataAkses = row.cells[4].textContent.toLowerCase();

            if (
              username.includes(searchValue) ||
              dataAkses.includes(searchValue)
            ) {
              row.style.display = "";
            } else {
              row.style.display = "none";
            }
          });
        });

      // Apply filter
      function applyFilter() {
        const peran = document.getElementById("filterPeran").value;
        const aktivitas = document.getElementById("filterAktivitas").value;
        const rows = document.querySelectorAll("#activityTable tbody tr");

        rows.forEach((row) => {
          let showRow = true;

          if (peran && !row.cells[2].textContent.includes(peran)) {
            showRow = false;
          }

          if (aktivitas && !row.cells[3].textContent.includes(aktivitas)) {
            showRow = false;
          }

          row.style.display = showRow ? "" : "none";
        });

        alert("Filter diterapkan!");
      }

      // Pagination
      let currentPage = 1;

      function previousPage() {
        if (currentPage > 1) {
          currentPage--;
          updatePagination();
        }
      }

      function nextPage() {
        currentPage++;
        updatePagination();
      }

      function updatePagination() {
        // In real implementation, this would load new data
        alert(`Loading page ${currentPage}...`);
      }

      // Export data
      function exportData(format) {
        alert(
          `Mengexport data ke format ${format.toUpperCase()}...\n\nFile akan didownload sebentar lagi.`,
        );
      }

      // Logout
      function logout() {
        if (confirm("Apakah Anda yakin ingin logout?")) {
          // Clear both localStorage and sessionStorage
          localStorage.removeItem("username");
          localStorage.removeItem("role");
          sessionStorage.removeItem("isLoggedIn");
          sessionStorage.removeItem("username");
          sessionStorage.removeItem("userRole");
          sessionStorage.removeItem("userName");
          window.location.href = "index.html";
        }
      }
    </script>
  </body>
</html>
